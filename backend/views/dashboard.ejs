<%- include('parciales/head', { title: 'Retro Music - Panel Admin', bodyClass: 'pagina-dashboard' }) %>

    <%- include('parciales/navbar') %>

    <!-- Main -->
    <div class="container mt-4">
      <main class="main-container">
        <div class="text-center mb-4">
          <h2>Panel de Administraci√≥n</h2>
          <p class="text-muted">Gesti√≥n de productos</p>
        </div>

        <div class="mb-4">
          <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#modalAgregarProducto">
            ‚ûï Agregar Producto
          </button>
        </div>

        <!-- Tabla de productos -->
        <div class="card shadow">
          <div class="card-body">
            <h5 class="card-title mb-3">Lista de Productos</h5>
            <div class="table-responsive">
              <table class="table table-striped table-hover">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Imagen</th>
                    <th>Nombre</th>
                    <th>Categor√≠a</th>
                    <th>Precio</th>
                    <th>Estado</th>
                    <th>Acciones</th>
                  </tr>
                </thead>
                <tbody id="productos-table-body">
                  <% if (productos && productos.length > 0) { %>
                    <% productos.forEach(producto => { %>
                      <tr>
                        <td><%= producto.id %></td>
                        <td>
                          <img src="<%= producto.imagen %>" alt="<%= producto.nombre %>" style="width: 60px; height: 60px; object-fit: cover; border-radius: 4px;">
                        </td>
                        <td><%= producto.nombre %></td>
                        <td>
                          <span class="badge bg-<%= producto.categoria === 'vinilos' ? 'primary' : 'info' %>">
                            <%= producto.categoria === 'vinilos' ? 'üéµ Vinilo' : 'üíø CD' %>
                          </span>
                        </td>
                        <td>$<%= producto.precio.toLocaleString('es-AR') %></td>
                        <td>
                          <% if (producto.activo) { %>
                            <span class="badge bg-success">‚úÖ Activo</span>
                          <% } else { %>
                            <span class="badge bg-secondary">‚ùå Inactivo</span>
                          <% } %>
                        </td>
                        <td>
                          <div class="btn-group btn-group-sm" role="group">
                            <button class="btn btn-warning" disabled>‚úèÔ∏è Editar</button>
                            <% if (producto.activo) { %>
                              <button class="btn btn-danger" disabled>üóëÔ∏è Desactivar</button>
                            <% } else { %>
                              <button class="btn btn-success" disabled>‚úÖ Activar</button>
                            <% } %>
                          </div>
                        </td>
                      </tr>
                    <% }); %>
                  <% } else { %>
                    <tr>
                      <td colspan="7" class="text-center">No hay productos registrados</td>
                    </tr>
                  <% } %>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </main>
    </div>

    <%- include('parciales/agregarProducto') %>

<%- include('parciales/footer') %>
